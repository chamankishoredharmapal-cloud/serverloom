{% extends "base_admin.html" %}
{% block title %}Pagdi — List{% endblock %}
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

{% block content %}
<div class="max-w-6xl mx-auto p-6">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-semibold">Pagdi — List</h2>
    <a href="{% url 'admin_pagdi_create' %}" class="bg-blue-600 text-white px-4 py-2 rounded">Assign Pagdi</a>
  </div>

  <div class="space-y-4">
    {% for d in data %}
    <div class="bg-white rounded shadow p-4 flex justify-between items-start">
      <div>
        <div class="font-semibold">{{ d.obj.employee.name }}</div>
        <div class="text-sm text-gray-600">Start: {{ d.obj.start_date|date:"M d, Y" }}</div>
        <div class="text-sm text-gray-600">Capacity: {{ d.obj.capacity_sarees }}</div>
        <div class="text-sm text-gray-600">Made: {{ d.made }} • Remaining: {{ d.remaining }}</div>
        <div class="text-sm text-gray-500 mt-2">{{ d.obj.notes }}</div>
      </div>

      <div class="text-right">
        {% if d.obj.end_date %}
        <span class="px-3 py-1 bg-gray-100 text-gray-600 rounded">Completed</span>
        {% else %}
        <span class="px-3 py-1 bg-green-100 text-green-700 rounded">Active</span>
        {% endif %}
      </div>
    </div>
    {% empty %}
    <div class="bg-white rounded shadow p-4">No pagdi history.</div>
    {% endfor %}
  </div>
</div>
{% endblock %}
